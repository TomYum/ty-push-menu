!function(a,b,c,d){tyPushMenu=function(b,c){this.enabled=!1,this.elem=b,this.$elem=a(b),this.wrapper,this.menuWrapper,this.options=c,this.metaData=this.$elem.data("tyPushMenu"),this.$body=a("body"),this.$nearElem,this.config,this.positions={},this.__menuInstances.push(this),this.$elem.data("typmId",this.__menuInstances.length-1),this.__activeSubMenu=[]},tyPushMenu.prototype.__menuInstances=[],tyPushMenu.prototype.__expandedMenus={},tyPushMenu.prototype.__pages={},tyPushMenu.prototype.__activePages=[],tyPushMenu.prototype.getInstance=function(a){return tyPushMenu.prototype.__menuInstances[a]},tyPushMenu.prototype.defaults={menuTrigger:".ty-menu-trigger",animationEngine:"css",position:"left",overlay:!0,lazyLoad:!1,isActive:!0,animation:{show:{duration:500,delay:0},hide:{duration:300,delay:0}}},tyPushMenu.prototype._calculatePositions=function(){var a=this.$menuWrapper.outerWidth(),b=this.$menuWrapper.outerHeight();"left"===this.config.position&&(this.positions.x=-a-10,this.positions.y=0),"right"===this.config.position&&(this.positions.x=a+10,this.positions.y=0),"top"===this.config.position&&(this.positions.x=0,this.positions.y=-b-10),"bottom"===this.config.position&&(this.positions.x=0,this.positions.y=b+10)},tyPushMenu.prototype._createContentWrapper=function(){var b;this.config.contentWrapperId=this.config.contentWrapperId||"tyPushMenu-content-wrapper",(b=a("#"+this.config.contentWrapperId)).length||(b=a("<div>").attr("id",this.config.contentWrapperId),a("body").children().appendTo(b),b.appendTo(a("body"))),this.$wrapper=b},tyPushMenu.prototype._lazyLoad=function(){var b={},c=this.config.lazyLoad,d=this;b.url=c.url,b.type=c.method||"POST",b.dataType=c.dataType||"json",c.requestData&&(b.data=c.requestData),b.success=function(a){var b;if("json"===c.dataType)if(b=a,c.contentMap)for(var e in c.contentMap){var f=c.contentMap[e];if(!b[f]&&""!==b[f])return!1;b=b[f]}else b=a.content;d.$elem.html(b),d._setPositions(),d._setPageTrigger(),d.__initSubmenu(),d.loaded=!0,d.show()},a.ajax(b)},tyPushMenu.prototype._setPositions=function(){this._calculatePositions(),this._setPagePosition(),this.$menuWrapper.velocity({translateX:this.positions.x,translateY:this.positions.y},0)},tyPushMenu.prototype._initOverlay=function(){var b=a("#ty-overlay"),c=this;b.length||(b=a("<div>").attr("id","ty-overlay").click(function(){c.hideAll()}).appendTo(a("body"))),this.$overlay=b},tyPushMenu.prototype._createWrapper=function(){},tyPushMenu.prototype._setPagePosition=function(){this.$menuWrapper.find(".menu-page:not(.active,.default), .inner-menu:not(.active,.default)").velocity({translateX:this.positions.x,translateY:this.positions.y},0)},tyPushMenu.prototype._show=function(){this.$menuWrapper.show().velocity({translateX:0,translateY:0},{duration:this.config.animation.show.duration,delay:this.config.animation.show.delay,display:"block"}),this.$wrapper.velocity({translateX:-this.positions.x,translateY:-this.positions.y},this.config.animation.show),this.$body.css("overflow","hidden"),this.$overlay.show().velocity({opacity:.8},this.config.animation.show),this.__expandedMenus[this.id]=!0,this.isVisiable=!0},tyPushMenu.prototype.show=function(){return!this.loaded&&this.config.lazyLoad?this._lazyLoad():this._show(),this},tyPushMenu.prototype.hide=function(){return this.$menuWrapper.velocity({translateX:this.positions.x,translateY:this.positions.y},{duration:this.config.animation.hide.duration,ddelay:this.config.animation.hide.delay,display:"none"}).velocity({display:"none"}),this.$wrapper.velocity({translateX:0,translateY:0},this.config.animation.hide),this.$body.css("overflow","auto"),this.isVisiable=!1,this.$overlay.velocity({opacity:0},{duration:this.config.animation.hide.duration,delay:this.config.animation.hide.delay,complete:function(){a(this).hide()}}),delete this.__expandedMenus[this.id],this},tyPushMenu.prototype.hideAll=function(){var a,b;for(a in this.__expandedMenus)(b=this.__menuInstances[a])&&b.hide()},tyPushMenu.prototype._setPageTrigger=function(){var b=this;b.$menuWrapper.find("[data-show-page]").click(function(){var c=a(this).data("show-page");b.showPage(c)}),b.$menuWrapper.find(".hide-trigger").click(function(){b.hidePage()}),b.$menuWrapper.find("[data-hide-before-index]").click(function(){var c=a(this).data("data-hide-before-index")||0;b.hidePagesBeforeIndex(c)}),b.$menuWrapper.find(".hide-all-trigger").click(function(){b.hideAllPages()})},tyPushMenu.prototype.__initSubmenu=function(){var a,b,c=this;(b=this.$elem.find(".inner-menu"))&&b.length&&(a=b.siblings("a,span"),a.click(function(a){return a.preventDefault(),c.showSubmenu(this),!1}),this.$elem.on("click",".inner-menu .prev",function(){c.submenuPrev()}))},tyPushMenu.prototype.showSubmenu=function(b){var c,d,e=a(b);if(d=e.data(),(c=e.siblings(".inner-menu"))&&c.length){if(!d.hasBacklink){var f=e.clone();f.prependTo(c).addClass(".parent-link"),a("<span>").addClass("prev").html("<<").prependTo(c),e.data("hasBacklink",!0)}this.__showPage(c),this.__activeSubMenu.push(c)}},tyPushMenu.prototype.submenuPrev=function(){var a;(a=this.__activeSubMenu.pop())&&this.__hidePage(a)},tyPushMenu.prototype.submenuHideAll=function(){for(var a;a=this.__activeSubMenu.pop();)this.__hidePage(a)},tyPushMenu.prototype.__showPage=function(a){a&&a.show().velocity({translateX:0,translateY:0},{duration:this.config.animation.show.duration,delay:this.config.animation.show.delay,display:"block"})},tyPushMenu.prototype.showPage=function(a){var b;(b=this.getPage(a))&&(this.__activePages.push(a),this.__showPage(b))},tyPushMenu.prototype.hidePage=function(){var a;this.__activePages.length&&(a=this.getPage(this.__activePages.pop()),this.__hidePage(a))},tyPushMenu.prototype.hidePagesBeforeIndex=function(a){var b,c,d;if((a||0===a)&&(b=this.__activePages.length))for(b--;c=this.__activePages.pop()&&b!==a;)d=this.getPage(c),this.__hidePage(d),b--},tyPushMenu.prototype.hideAllPages=function(){var a,b;if(this.__activePages.length)for(;a=this.__activePages.pop();)b=this.getPage(a),this.__hidePage(b)},tyPushMenu.prototype.__hidePage=function(a){a&&a.velocity({translateX:this.positions.x,translateY:this.positions.y},{duration:this.config.animation.hide.duration,delay:this.config.animation.hide.delay,display:"block"})},tyPushMenu.prototype.getPage=function(a){var b;return(b=this.__pages[a])&&b.length||(b=this.$menuWrapper.find("#"+a),this.__pages[a]=b),b.length?b:null},tyPushMenu.prototype.init=function(){var b=this;return this.config=a.extend({},this.defaults,this.options,this.metaData),this.__menuInstances.push(this),this.id=this.__menuInstances.length-1,(this.$nearElem=this.$elem.prev()).length||(this.$parent=this.$elem.parent()),this.config.lazyLoad&&(this.loaded=!1,this.$elem.append(a("<span>").addClass(this.config.lazyLoad.spinnerClass?this.config.lazyLoad.spinnerClass:"ty-simple-spinner"))),this.$menuWrapper=a("<div>").addClass("ty-menu ty-menu-"+this.config.position),this.$elem.addClass("ty-menu-inner"),a("html").append(this.$menuWrapper),this.config.isActive&&this.enable(),this._initOverlay(),this._createContentWrapper(),this.registrTrigger(),this._setPositions(),this._setPageTrigger(),this.__initSubmenu(),this.$menuWrapper.velocity({translateX:this.positions.x,translateY:this.positions.y},0),a(this.$elem).resize(function(){b.isVisiable?b._calculatePositions():b._setPositions()}),b},tyPushMenu.prototype.registrTrigger=function(b){b&&(this.config.menuTrigger=b);var d=this;a(c).on("click",this.config.menuTrigger,function(){d.toggle()})},tyPushMenu.prototype.toggle=function(){this.isVisiable?this.hide():this.show()},tyPushMenu.prototype.enable=function(){this.$menuWrapper.append(this.$elem),this._calculatePositions(),this.enabled=!0},tyPushMenu.prototype.disable=function(){this.$nearElem&&this.$nearElem.length?this.$elem.after(this.$nearElem):this.$parent.prepend(this.$elem),this.enabled=!1},a.fn.tyPushMenu=function(a){var b,c;return((b=this.data("typmId"))||0===b)&&(c=tyPushMenu.prototype.getInstance(b))?c:new tyPushMenu(this,a).init()}}(jQuery,window,document);
//# sourceMappingURL=ty.pushmenu.map